flowchart TD
    subgraph MENTOR["Mentor Lane"]
        M1[Register Account]
        M2[Submit Profile]
        M3[Wait for Approval<br/>isLive = false]
        M4[Profile Live<br/>isLive = true]
        M5[Receive Student Request]
        M6[Accept/Reject Session]
        M7[Session Scheduled]
    end

    subgraph ADMIN["Admin Lane"]
        A1[Admin Login]
        A2[Review Mentor Profile<br/>haveAdminApproval?]
        A3{Approved?}
    end

    subgraph STUDENT["Student Lane"]
        S1[Browse Live Mentors]
        S2[Send Mentor Request]
        S3[Wait for Response<br/>haveMentorApproval?]
        S4{Accepted?}
        S5[Session Confirmed]
    end

    %% Mentor flow
    M1 --> M2
    M2 --> M3
    
    %% Handoff to Admin
    M3 --> A2
    A1 --> A2
    A2 --> A3
    
    %% Approval decision
    A3 -- Yes --> M4
    A3 -- No --> M2
    
    %% Student interaction
    M4 --> S1
    S1 --> S2
    S2 --> M5
    M5 --> M6
    
    %% Approval loop
    M6 -- Accept --> M7
    M6 -- Reject --> S3
    S3 --> S4
    S4 -- Yes --> M7
    S4 -- No --> S1
    
    %% Final state
    M7 --> S5